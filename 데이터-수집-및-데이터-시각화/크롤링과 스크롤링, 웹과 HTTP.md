[TOC]

# 크롤링과 스크롤링, 웹과 HTTP

### 멀티캠퍼스 서비스 산업 데이터를 활용한 빅데이터 분석 

>사용하는 툴 : 파이썬, 파이참 아나콘다, 주피터 노트북
>수업의 목적 : 파이썬을 기반하여 데이터 수집 이론 습득
>					  수집한 데이터 관리 이론 습득
>					  모듈을 이용한 데이터 시각화 능력 배양

수업에 앞서..

​	웹 기반으로 무언가 하려면 html css javascript 세가지는 하는게 좋을 것 같다.

​	리스트, 튜플, 딕셔너리 데이터의 특성에 대해 잘 생각해보면서 따라가자.



## 웹 크롤링과 웹 스크래핑

두 용어의 의미는 서로 미묘한 차이가 있지만, 시장에서는 혼용되고 있다.

>### 크롤링
>
>주로 구글, 네이버와 같은 검색 포털에서 수행되며, 정보룰 수집하고 분류해서 데이터베이스화하는 작업이다. 데이터를 수집하는 소프트웨어를 크롤러(crawler) 혹은 봇(bot)이라고 부른다.
>
>봇은 개인이 작성한 블로그, 뉴스 기사 등의 페이지를 모두 방문해서, 문서가 어디에 있고 누가 작성했는지, 어떤 내용이 들어있는지를 수집하게 된다.
>
>수집된 데이터를 데이터베이스로 만들어 놓기 때문에, 차후에 데이터를 사용할 때 사람들이 검색하면 그 결과를 데이터베이스에서 찾아 빠르게 보여줄 수 있다.
>
>### 스크래핑
>넓은 의미로는 웹페이지의 정보를 수집하는 일련의 행위를 말한다. 따라서 크롤링은 스크래핑의 한 종류라고 할 수 있다. 좁은 의미로는 특정 웹페이지에서 원하는 데이터 일부를 가져오는 것을 말한다.

이러한 작업은 사람이 웹페이지에 직접 접속해서 정보를 읽는 것과 유사하다. 인터넷상에 흩어져있는 자료를 서핑하며 수집 가공을 하는 행위를 단지 사람 대신 컴퓨터가 프로그램을 통해 수행할 뿐이다.

우리가 드넓은 인터넷 세상에 분산되어 떠다니는 정보들을 유용하게 활용하려면 문서들을 수집하여 가공하는 기술이 필요하다. 이때 프로그램 구성에 따라 웹 서핑 능력의 차이가 발생한다. (대표적으로 자바스크립트의 처리 가능 여부가 있다) 어느 부류의 기술을 얼마나 빨리 검색 대상에 포함시키냐 하는 것이 우위를 결정하는 요인으로, 최근 웹 검색의 중요성에 따라 해당 분야 기술이 급속도로 발전하고 있다.



## 웹

웹은 World Wide Web의 줄임말이다. 우리는 흔히 인터넷과 웹을 혼동해서 사용하기도 한다. 인터넷은 컴퓨터 네트워크의 통신망을 의미하며, 웹은 인터넷 상에서 동작하는 하나의 서비스다. 만약 인터넷이 도로망이라고 한다면 웹은 자동차에 비유할 수 있고, 인터넷이 하나의 도시라고 한다면 웹은 건물 한 채에 비유할 수 있다.

인터넷과 웹을 혼동해서 사용하는 이유는 그만큼 인터넷을 활용한 서비스에서 웹의 영향력이 크기 때문이다.

우리가 사용하는 웹은 HTML(hyper-text markup language)로 작성된 문서이다. HTML로 작성된 웹을 보기 편하게 해주는 소프트웨어를 웹 브라우저(Web browser)라고 한다.

### 웹 서버

웹 서버는 쉽게 말해 고성능 PC들의 집합이다. 다양한 사람들이 서버로 보내는 요청에 대해 실시간으로 처리하여 응답할 수 있는 능력을 갖추고 있다. 

### 클라이언트

웹 서버로부터 데이터를 요청하는 대상을 클라이언트라고 하는데, 웹 브라우저들이 이것에 해당한다. 클라이언트가 서버로 필요한 데이터를 요청하면, 서버는 요청 내용에 따라 적절한 응답을 보낸다. 뒤이어 클라이언트는 전달받은 데이터를 사람이 읽기 좋은 형태로 화면에 출력한다.

HTML이라는 텍스트 형태의 문서를 웹 브라우저(클라이언트)가 해석한 뒤 데이터를 시각화해서 웹페이지로 보여줄 수 있다. 

웹 서버 입장에서는 HTML이라는 하나의 형태로 데이터를 반환하면 다양한 브라우저에서 같은 화면이 출력될 수 있다. 

스크래핑을 하는 입장에서 보면 가져올 데이터가 주로 HTML 문서로 만들어져 있기 때문에 최소한 HTML 구조에 대해서는 알아두면 좋겠다. (웹페이지의 구성요소 : HTML(골조), CSS(디자인), Javascript(이벤트,여러가지 기능))

웹 서버는 HTML 뿐만 아니라 다양한 형태로 데이터를 반환할 수 있다.



## HTML

HTML(Hypertext Markup Language)의 줄임말이다. 요즘 사용되는 버전은 HTML5! 

- 하이퍼텍스트 

  비순차적으로 검색할 수 있는 문서를 의미한다. 

  일반적인 문서는 제공해주는 내용 그대로 하나씩 볼 수 있는 반면, 하이퍼텍스트는 링크를 클릭해서 다른 문서로의 이동을 지원한다. (하이퍼링크)

- 마크업 언어

  태그와 같은 구분자를 이용해서 데이터의 구조를 기술하는 언어를 말한다.

  일반적으로 시작 태그와 종료 태그를 하나의 쌍으로 사용한다 `<p>내용</p>`

정리하면, HTML은 태그를 사용하고 링크를 지원하는 언어이고, HTML 문서는 태그로 감싸진 속성과 내용들의 모음이다.



## JSON

JavaScript Object Notation의 약자로, JavaScript 객체 문법으로 구조화된 데이터를 표현하기 위한 문자 기반의 표준 포맷을 말한다. 웹 어플리케이션에서 데이터를 전송할 때 일반적으로 사용되는 포맷이며, 문자열 형태로 존재한다.

지금 당장 자바스크립트를 익혀야 한다고 겁먹을 필요는 없다. 딱히 자바스크립트가 아니더라도 JSON을 읽고 쓸 수 있는 기능이 다양한 프로그래밍 환경에서 사용 가능하다. 먼저 JSON 파일의 특성부터 찬찬히 알아보면서 크롤링을 배워가면 된다.

 

## HTTP

서버와 클라이언트는 프로토콜이라는 정해진 규약에 따라 통신하는데, HTTP는 HTML 문서와 같은 리소스들을 가지고 올 수 있도록 하는 프로토콜이다.

클라이언트의 요청이 있을 때만 서버가 응답(Response)하는 단방향 통신 방식(connectionless)으로 동작한다. 즉, 계속해서 서버와 브라우저가 연결돼있진 않으며, 서버는 클라이언트가 요청한 정보를 전송하고 곧바로 연결을 종료한다. 또한 클라이언트는 서버가 요구하는 API에 맞게 요청해야만 응답을 받을 수 있다.

### URL

Uniform Resource Locator, 인터넷에서 자원의 위치를 나타낸다. 이론적으로, 각각의 유일한 URL은 유일한 자원을 가리키며, 자원은 HTML 페이지, CSS 문서, 이미지 등이 될 수 있다.


### HTTP 요청/응답 패킷

클라이언트를 통해 서버와 주고받는 데이터는 패킷 형태로 오간다. 요청 패킷의 헤더는 클라이언트에서 요구하는 양식의 키/밸류를 세팅한 후 전송된다. 이에 서버는 응답 패킷을 마찬가지로 서버에서 요구하는 양식의 키/밸류를 세팅한 후 전송한다.

### HTTP 패킷의 헤더와 바디

- 헤더(Header)란?

  HTTP를 통한 요청 및 응답시 헤더 정보가 키/밸류 형식으로 세팅된다. 서버는 요청 패킷의 헤더가 알맞은 양식으로 왔는지 확인한 뒤 응답 패킷을 전송한다. 대개 브라우저에서는 다음의 헤더를 설정한다.

  - User-Agent: 브라우저 종류 
  - Referer : 이전 페이지 URL(어떤 페이지를 거쳐서 들어왔는가?)
  - Accept-Language: 어떤 언어로 응답을 원하는가? 
  - Authorization : 인증 정보

  크롤링을 할 때는 보통 User-Agent와 Referer를 커스텀하게 설정할 필요가 있다.

- 바디(Body)란?

  HTTP 요청 시에는 바디가 없고, 응답에만 있다. 접근 요청에 대한 응답, 즉 웹 페이지의 여러가지 정보들이 담겨있다. HTML코드, 이미지데이터, Javascript코드, CSS코드, 동영상 등 우리가 수집할 여러가지 데이터 형태로 존재한다.


### HTTP 매서드

- **get : 리소스 요청 (크롤링에 주로 사용)**
- **post : 대기 리소스 추가 요청이나 수정/삭제 목적으로 사용 (크롤링에 주로 사용)**
- put : 리소스 수정 요청
- delete : 리소스 삭제 요청
- head : http 헤더 정보만 요청. 해당 자원의 존재여부만 확인하기 위한 목적
- options : 웹서버가 지원하는 메서드의 종류를 반환 요청
- trace : 클라이언트의 요청을 그대로 반환

### HTTP 매서드 - GET, POST

- GET
  - 실생활에서 편지만 보낼 수 있는 엽서에 비유할 수 있음.
  - 주소와 함께 메세지를 남김. 물건은 보낼 수 없다 (파일 업로드 불가)
  - 잘 설계된 서비스라면, 주로 조회 요청시 사용

- POST
  - 실생활에서 편지를 포함한 여러 물건도 보낼 수 있는 택배에 비유할 수 있음.
  - 주소와 함꼐 메세지나 파일도 보낼 수 있음 (파일 업로드 지원)
  - 잘 설계된 서비스에서 주로 추가/수정/삭제 요청시 사용
